{% extends "common/layout-main.html" %} {% block content %}

<div class="col-xs-12">
    <div class="box">
        <div class="box-header with-border">
            <h3 class="box-title">Users</h3>
            <div class="box-tools">
                <div class="input-group input-group-sm" style="width: 150px;">
                    <input type="text" name="table_search" class="form-control pull-right" placeholder="Search">

                    <div class="input-group-btn">
                        <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.box-header -->
        <div class="box-body">
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <th style="width: 10px">Id</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Avatar</th>
                        <th>Auth</th>
                        <th>CreateTime</th>
                        <th style="width: 40px">Contorl</th>
                    </tr>
                    {% for user in users%}
                    <tr>
                        <td>{{user.id}}</td>
                        <td>{{user.name}}</td>
                        <td>{{user.mail}}</td>
                        <td>{{user.avatar}}</td>
                        <td>{{user.auth}}</td>
                        <td>{{user.create_time}}</td>
                        <td>--------</td>
                    </tr>
                    {% endfor %}

                </tbody>
            </table>
        </div>
        <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" data-whatever="@fat">
             Launch demo modal
        </button>
        <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
                    </div>
                    <div class="modal-body">
                        ...
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- /.box-body -->
        <div class="box-footer clearfix">
            <ul class="pagination pagination-sm no-margin pull-right">
                {% for page in pageNav%}
                <li class="{% if page.active%} active {% endif %}">
                    <a class="page-nav-link" pageIndex="{{page.pageIndex}}">{{page.num}}</a>
                </li>
                {% endfor %}
            </ul>
        </div>


    </div>
</div>

{% endblock %} {% block javascript %}
<script>
    (function(document) {
        var pageNavLinks = document.getElementsByClassName('page-nav-link');
        for (var index = 0; index < pageNavLinks.length; index++) {
            var element = pageNavLinks[index];
            var url = urlUtil.setQueryValue('page', element.getAttribute('pageIndex'));
            element.setAttribute('href', url);
        }



    })(document);
    $('#exampleModal').on('show.bs.modal', function(event) {
        var button = $(event.relatedTarget) // Button that triggered the modal
        var recipient = button.data('whatever') // Extract info from data-* attributes
            // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
            // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
        var modal = $(this)
        modal.find('.modal-title').text('New message to ' + recipient)
        modal.find('.modal-body input').val(recipient)
    })

    function deleteImage(id) {
        var ok = confirm("confirm to delete?");
        if (ok) {
            $.get('/user/delete?id=' + id, function(res) {
                var data = JSON.parse(res);
                if (data.ok) {
                    window.location = window.location;
                } else {
                    alert(data.result);
                }

            });
        }
    }
</script>
{% endblock %}